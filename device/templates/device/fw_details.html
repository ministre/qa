{% extends "device/wrapper.html" %}

{% load i18n static %}

{% block content %}

<p>
    <a href="{% url 'devices' %}">{% trans "Devices" %}</a>
    &raquo;
    <a href="{% url 'device_details' pk=fw.device.id tab_id=3 %}">{{ fw.device.vendor }} {{ fw.device.model }}
        ({{ fw.device.hw }})
    </a>
    &raquo;
    {{ fw.version }}
</p>

<ul class="tabs" data-tabs id="fw-tabs">
    <li class="tabs-title{% if tab_id == 1 %} is-active{% endif %}">
        <a href="#general" aria-selected="true">{% trans "General" %}</a>
    </li>
    <li class="tabs-title{% if tab_id == 2 %} is-active{% endif %}">
        <a href="#changelog" aria-selected="true">{% trans "Changelog" %}</a>
    </li>
    <li class="tabs-title{% if tab_id == 3 %} is-active{% endif %}">
        <a href="#accounts" aria-selected="true">{% trans "Accounts" %}
            {% if fw_accounts.count > 0 %}({{ fw_accounts.count }}){% endif %}
        </a>
    </li>
    <li class="tabs-title{% if tab_id == 4 %} is-active{% endif %}">
        <a href="#files" aria-selected="true">{% trans "Files" %}</a>
    </li>
    <li class="tabs-title{% if tab_id == 5 %} is-active{% endif %}">
        <a href="#configs" aria-selected="true">{% trans "Configurations" %}</a>
    </li>
    <li class="tabs-title{% if tab_id == 6 %} is-active{% endif %}">
        <a href="#screenshots" aria-selected="true">{% trans "Screenshots" %}</a>
    </li>
</ul>

<div class="tabs-content" data-tabs-content="fw-tabs">
    <div class="tabs-panel{% if tab_id == 1 %} is-active{% endif %}" id="general">
        <a href="{% url 'fw_update' pk=fw.id %}" class="button small">{% trans "Update" %}</a>
        <a href="{% url 'fw_delete' pk=fw.id %}" class="button alert small">{% trans "Delete" %}</a>

        <table class="hover unstriped">
            <tbody>
            <tr>
                <td>{% trans "FW Version" %}:</td>
                <td>{{ fw.version }}</td>
            </tr>
            <tr>
                <td>{% trans "Checksum" %}:</td>
                <td>{% if fw.checksum %}{{ fw.checksum }}{% endif %}</td>
            </tr>
            <tr>
                <td>{% trans "Description" %}:</td>
                <td>{% if fw.description %}{{ fw.description }}{% endif %}</td>
            </tr>
            <tr>
                <td>{% trans "Created" %}:</td>
                <td>{{ fw.created_at }} ({{ fw.created_by }})</td>
            </tr>
            <tr>
                <td>{% trans "Last Update" %}:</td>
                <td>{{ fw.updated_at }} ({{ fw.updated_by }})</td>
            </tr>
            </tbody>
        </table>
    </div>

    <div class="tabs-panel{% if tab_id == 2 %} is-active{% endif %}" id="changelog">
        <pre><code>{{ fw.changelog|safe }}</code></pre>
    </div>

    <div class="tabs-panel{% if tab_id == 3 %} is-active{% endif %}" id="accounts">
        <a href="{% url 'fw_account_create' fw_id=fw.id %}" class="button small">{% trans "Create" %}</a>

        {% if fw_accounts %}
        <table class="display" style="width:100%">
            <thead>
            <tr>
                <th>ID</th>
                <th>{% trans "Username" %}</th>
                <th>{% trans "Password" %}</th>
            </tr>
            </thead>
            <tbody>
            {% for fw_account in fw_accounts %}
            <tr>
                <td>{{ fw_account.id }}
                    <a href="{# url 'protocol_update' device_id=device.id pk=protocol.id #}">
                        <i class="step fi-pencil"></i>
                    </a>
                    <a href="{# url 'protocol_delete' device_id=device.id pk=protocol.id #}">
                        <i class="step fi-minus" style="color: #bc104b"></i>
                    </a>
                </td>
                <td>{{ fw_account.username }}</td>
                <td>{{ fw_account.password }}</td>
            </tr>
            {% endfor %}
            </tbody>
        </table>
        {% endif %}

    </div>

</div>
{% endblock %}