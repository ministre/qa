{% extends "device/wrapper.html" %}

{% load i18n static %}

{% block content %}

<a href=".." class="button">&laquo; {% trans "Back" %}</a>
<a href="../update/{{ testplan.id }}/" class="button">{% trans "Update" %}</a>
<a href="../delete/{{ testplan.id }}/" class="button alert">{% trans "Delete" %}</a>

<form method="post" action="/redmine/tests_import/">
    {% csrf_token %}
    <input type="hidden" name="testplan_id" value="{{ testplan.id }}">
    <input type="hidden" name="redmine_url" value="{{ testplan.redmine_url }}">
    <input type="hidden" name="tag" value="{{ testplan.device_type.tag }}">
    <input type="submit" value='{% trans "Add Tests from Redmine" %}' class="button" />
</form>

<h4>{{ testplan.name}}</h4>

<p class="label warning">{{ testplan.version}}</p>
<p class="label warning">{{ testplan.device_type.tag}}</p>

<h5>{% trans "Introduction" %}</h5>

<a href="../{{ testplan.id }}/chapter/create/" class="button small">{% trans "Add Chapter" %}</a>

        <ul class="accordion" data-accordion data-multi-expand="true">

            {% for chapter in chapters %}

            <li class="accordion-item" data-accordion-item>
                <!-- Accordion tab title -->
                <a href="#" class="accordion-title">{{ forloop.counter }}. {{ chapter.name }}</a>
                <!-- Accordion tab content: it would start in the open state due to using the `is-active` state class. -->
                <div class="accordion-content" data-tab-content>
                    <div class="grid-x">
                        <p>{{ chapter.text }}</p>
                    </div>
                    <div class="grid-x">
                        <a href="chapter/update/{{ chapter.id }}/" class="button small">{% trans "Update" %}</a>&nbsp;
                        <a href="chapter/delete/{{ chapter.id }}/" class="button small alert">{% trans "Delete" %}</a>
                    </div>
                </div>
            </li>

            {% endfor %}

        </ul>

<h5>{% trans "Test list" %}</h5>

<a href="../{{ testplan.id }}/category/create/" class="button small">{% trans "Add Category" %}</a>

        <ul class="accordion" data-accordion data-multi-expand="true">

            {% for category in categories %}

            <li class="accordion-item is-active" data-accordion-item>
                <!-- Accordion tab title -->
                <a href="#" class="accordion-title">{{ forloop.counter }}. {{ category.name }}</a>
                <!-- Accordion tab content: it would start in the open state due to using the `is-active` state class. -->
                <div class="accordion-content" data-tab-content>
                    {% for test in category.tests %}
                    <a href="../test/{{ test.id }}/">
                        {{forloop.parentloop.counter}}.{{ forloop.counter }}. {{ test.name }}
                    </a><br>
                    {% endfor %}<br>
                    <div class="grid-x">
                        <a href="category/{{ category.id }}/test/create/" class="button small">{% trans "Add Test" %}</a>&nbsp;
                        <a href="category/update/{{ category.id }}/" class="button small">{% trans "Update" %}</a>&nbsp;
                        <a href="category/delete/{{ category.id }}/" class="button small alert">{% trans "Delete" %}</a>
                    </div>
                </div>
            </li>

            {% endfor %}

        </ul>


{% endblock %}
