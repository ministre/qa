{% extends "device/wrapper.html" %}

{% load i18n static %}

{% block content %}

<p>
    <a href="/testplan/">{% trans "Testplan" %}</a> &raquo; {{ testplan.name}}
</p>

<p>
<ul class="tabs" data-tabs id="example-tabs">
    <li class="tabs-title"><a href="#panel1" aria-selected="true">{% trans "General" %}</a></li>
    <li class="tabs-title"><a data-tabs-target="panel2" href="#panel2">{% trans "Introduction" %}</a></li>
    <li class="tabs-title is-active"><a data-tabs-target="panel3" href="#panel3">{% trans "Tests" %}</a></li>
</ul>

<div class="tabs-content" data-tabs-content="example-tabs">
    <div class="tabs-panel" id="panel1">
        <table class="hover unstriped">
            <tbody>
            <tr>
                <td>{% trans "Document version" %}:</td>
                <td>{{ testplan.version }}</td>
            </tr>
            <tr>
                <td>{% trans "Device type" %}:</td>
                <td>{{ testplan.device_type.tag }}</td>
            </tr>
            <tr>
                <td>{% trans "Created by" %}:</td>
                <td>{{ testplan.created_by }}</td>
            </tr>
            <tr>
                <td>{% trans "Redmine URL" %}:</td>
                <td>{{ testplan.redmine_url }}</td>
            </tr>
            </tbody>
        </table>

        <form method="post" action="/redmine/tests_import/">
            {% csrf_token %}
            <a href="../update/{{ testplan.id }}/" class="button">{% trans "Update" %}</a>
            <input type="hidden" name="testplan_id" value="{{ testplan.id }}">
            <input type="hidden" name="redmine_url" value="{{ testplan.redmine_url }}">
            <input type="hidden" name="tag" value="{{ testplan.device_type.tag }}">
            <input type="submit" value='{% trans "Update from Redmine" %}' class="button success" />
            <a href="../delete/{{ testplan.id }}/" class="button alert">{% trans "Delete" %}</a>
        </form>
    </div>


  <div class="tabs-panel" id="panel2">
    <p>
        <a href="../{{ testplan.id }}/chapter/create/" class="button">{% trans "Add Part" %}</a>
    </p>
  </div>
  <div class="tabs-panel is-active" id="panel3">
    <p>
        <a href="../{{ testplan.id }}/category/create/" class="button">{% trans "Add Category" %}</a>
    </p>

        {% for category in categories %}
        <ul>
            <li>{{ forloop.counter }}. {{ category.name }}
                {% for test in category.tests %}
                <ul>
                    <li>{{forloop.parentloop.counter}}.{{ forloop.counter }}. {{ test.name }}</li>
                </ul>
                {% endfor %}
            </li>
        </ul>
        {% endfor %}

  </div>
</div>

</p>










<p></p>




<h5>{% trans "Introduction" %}</h5>



        <ul class="accordion" data-accordion data-multi-expand="true">

            {% for chapter in chapters %}

            <li class="accordion-item" data-accordion-item>
                <!-- Accordion tab title -->
                <a href="#" class="accordion-title">{{ forloop.counter }}. {{ chapter.name }}</a>
                <!-- Accordion tab content: it would start in the open state due to using the `is-active` state class. -->
                <div class="accordion-content" data-tab-content>
                    <div class="grid-x">
                        <p>{{ chapter.text }}</p>
                    </div>
                    <div class="grid-x">
                        <a href="chapter/update/{{ chapter.id }}/" class="button small">{% trans "Update" %}</a>&nbsp;
                        <a href="chapter/delete/{{ chapter.id }}/" class="button small alert">{% trans "Delete" %}</a>
                    </div>
                </div>
            </li>

            {% endfor %}

        </ul>

<h5>{% trans "Test list" %}</h5>



        <ul class="accordion" data-accordion data-multi-expand="true">

            {% for category in categories %}

            <li class="accordion-item is-active" data-accordion-item>
                <!-- Accordion tab title -->
                <a href="#" class="accordion-title">{{ forloop.counter }}. {{ category.name }}</a>
                <!-- Accordion tab content: it would start in the open state due to using the `is-active` state class. -->
                <div class="accordion-content" data-tab-content>
                    {% for test in category.tests %}
                    <a href="../test/{{ test.id }}/">
                        {{forloop.parentloop.counter}}.{{ forloop.counter }}. {{ test.name }}
                    </a><br>
                    {% endfor %}<br>
                    <div class="grid-x">
                        <a href="category/{{ category.id }}/test/create/" class="button small">{% trans "Add Test" %}</a>&nbsp;
                        <a href="category/update/{{ category.id }}/" class="button small">{% trans "Update" %}</a>&nbsp;
                        <a href="category/delete/{{ category.id }}/" class="button small alert">{% trans "Delete" %}</a>
                    </div>
                </div>
            </li>

            {% endfor %}

        </ul>

{% endblock %}
