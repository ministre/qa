{% extends "device/wrapper.html" %}

{% load i18n static %}

{% block content %}

<p><a href="{% url 'testplans' tab_id=1 %}">{% trans "Testplan" %}</a> &raquo;
    <a href="{% url 'testplan_details' pk=testplan.id tab_id=2 %}">{{ testplan.name }}</a>  &raquo; {{ chapter.name }}</p>

<ul class="tabs" data-tabs id="chapter-tabs">
    <li class="tabs-title"><a href="#panel1" aria-selected="true">{% trans "General" %}</a></li>
    <li class="tabs-title is-active"><a data-tabs-target="panel2" href="#panel2">{% trans "Description" %}</a></li>
    <li class="tabs-title"><a data-tabs-target="panel3" href="#panel3">{% trans "Redmine" %}</a></li>
</ul>

<div class="tabs-content" data-tabs-content="chapter-tabs">
    <div class="tabs-panel" id="panel1">
        <table class="hover unstriped">
            <tbody>
            <tr>
                <td>{% trans "Chapter name" %}:</td>
                <td>{{ chapter.name }}</td>
            </tr>
            <tr>
                <td>{% trans "Created" %}:</td>
                <td>{{ chapter.created_at }} ({{ chapter.created_by }})</td>
            </tr>
            <tr>
                <td>{% trans "Last Update" %}:</td>
                <td>{{ chapter.updated_at }} ({{ chapter.updated_by }})</td>
            </tr>
            </tbody>
        </table>
    </div>


  <div class="tabs-panel is-active" id="panel2">
      {{ chapter_text|safe }}
  </div>


  <div class="tabs-panel" id="panel3">
      <table class="hover unstriped">
          <tbody>
          <tr>
              <td>{% trans "Redmine URL" %}:</td>
              <td>{{ chapter.redmine_url }}</td>
          </tr>
          </tbody>
      </table>

      <form method="post" action="/redmine/import_chapter_details/">
          {% csrf_token %}
          <input type="hidden" name="chapter_id" value="{{ chapter.id }}">
          <input type="hidden" name="testplan_id" value="{{ testplan.id }}">
          <input type="hidden" name="redmine_url" value="{{ chapter.redmine_url }}">
          <input type="hidden" name="tag" value="{{ testplan.device_type.tag }}">
          <input type="submit" value='{% trans "Update from Redmine" %}' class="button success small" />
      </form>

  </div>
</div>

{% endblock %}